---
const currentPath = new URL(Astro.request.url).pathname

const links = [
	{ text: 'O nás', href: '/o_nas' },
	{ text: 'Naši psi', href: '/nasi_psi' },
	{ text: 'Štěňata', href: '/vrh' },
	{ text: 'Krycí psi', href: '/kryci_psi' },
	{ text: 'Dokumenty', href: '/dokumenty' }
	//{ text: 'Kontakt', href: '/kontakt' }
]
---

<header class="bg-white">
	<nav class="h-16 flex items-center justify-between px-6">
		<a href="/" class="block h-full w-fit">
			<img src="./images/logo_rhodeny.png" alt="Logo" class="block w-auto h-full object-contain" />
		</a>

		<ul class="hidden md:flex items-center gap-4 lg:gap-6">
			{
				links &&
					links.map((link) => (
						<li
							class={`${
								currentPath === link.href ? 'after:scale-x-100 after:opacity-100 after:block' : ''
							} flex relative after:h-0.5 after:bg-[#e29c90] after:absolute after:left-0 after:right-0 after:-bottom-1 after:opacity-0 after:scale-x-0 after:transition-all after:duration-[250] after:ease-[cubic-bezier(0.25, 0.46, 0.45, 0.94)] after:hover:opacity-100 after:hover:scale-x-100`}
						>
							<a class="whitespace-nowrap block" href={link.href}>
								{link.text}
							</a>
						</li>
					))
			}
		</ul>
		<div class="hidden md:flex gap-4">
			<button>CZECH</button>
			<button class="px-3 py-2 bg-blue-500 text-white rounded-lg"> Kontakt </button>
		</div>
		<button class="block md:hidden p-1 rounded-full hover:bg-black/2" data-open-button>
			<svg xmlns="http://www.w3.org/2000/svg" height="26" viewBox="0 -960 960 960" width="26">
				<path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"></path>
			</svg>
		</button>
	</nav>
	<div
		class="fixed top-0 bottom-0 right-0 w-80 transition-all duration-500 translate-x-full flex flex-col z-20 bg-slate-300"
		data-side-bar
	>
		<button data-close-button>
			<svg xmlns="http://www.w3.org/2000/svg" height="26" viewBox="0 -960 960 960" width="26">
				<path
					d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"
				>
				</path>
			</svg>
		</button>
		<ul>
			{
				links &&
					links.map((link) => (
						<li
							class={`${
								currentPath === link.href ? 'after:scale-x-100 after:opacity-100 after:block' : ''
							} flex relative after:h-0.5 after:bg-[#e29c90] after:absolute after:left-0 after:right-0 after:-bottom-1 after:opacity-0 after:scale-x-0 after:transition-all after:duration-[250] after:ease-[cubic-bezier(0.25, 0.46, 0.45, 0.94)] after:hover:opacity-100 after:hover:scale-x-100`}
						>
							<a class="whitespace-nowrap block" href={link.href}>
								{link.text}
							</a>
						</li>
					))
			}
		</ul>
	</div>
</header>

<script lang="js">
	const openButton = document.querySelector('[data-open-button]')
	const closeButton = document.querySelector('[data-close-button]')
	const sideBar = document.querySelector('[data-side-bar]')
	const overlay = document.querySelector('[data-overlay]')

	openButton.addEventListener('click', () => {
		sideBar.classList.remove('translate-x-full')
		sideBar.classList.add('translate-0-full')
		overlay.classList.remove('hidden')
	})

	closeButton.addEventListener('click', () => {
		sideBar.classList.remove('translate-0-full')
		sideBar.classList.add('translate-x-full')
		overlay.classList.add('hidden')
	})

	overlay.addEventListener('click', () => {
		sideBar.classList.remove('translate-0-full')
		sideBar.classList.add('translate-x-full')
		overlay.classList.add('hidden')
	})
</script>
